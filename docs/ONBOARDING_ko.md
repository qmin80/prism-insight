# PRISM-INSIGHT ì˜¨ë³´ë”© ê°€ì´ë“œ

> **ëŒ€ìƒ**: ì£¼ë‹ˆì–´ ê°œë°œì  
> **ëª©ì **: PRISM-INSIGHT í”„ë¡œì íŠ¸ ì „ë°˜ì„ ì´í•´í•˜ê³  ê°œë°œì„ ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ ë•ê¸°  
> **ì‘ì„±ì¼**: 2025-12-05

---

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì´í•´](#2-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜-ì´í•´)
3. [ê°œë°œ í™˜ê²½ ì„¤ì •](#3-ê°œë°œ-í™˜ê²½-ì„¤ì •)
4. [í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì´í•´](#4-í•µì‹¬-ì»´í¬ë„ŒíŠ¸-ì´í•´)
5. [ê°œë°œ ì›Œí¬í”Œë¡œìš°](#5-ê°œë°œ-ì›Œí¬í”Œë¡œìš°)
6. [ì‹¤ìŠµ ê°€ì´ë“œ](#6-ì‹¤ìŠµ-ê°€ì´ë“œ)
7. [ë¬¸ì œ í•´ê²° ê°€ì´ë“œ](#7-ë¬¸ì œ-í•´ê²°-ê°€ì´ë“œ)
8. [ë‹¤ìŒ ë‹¨ê³„](#8-ë‹¤ìŒ-ë‹¨ê³„)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 PRISM-INSIGHTë€?

PRISM-INSIGHTëŠ” **AI ê¸°ë°˜ í•œêµ­ ì£¼ì‹ì‹œì¥ ë¶„ì„ ë° ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤. 

**í•µì‹¬ ê¸°ëŠ¥:**
- ğŸ¤– **13ê°œì˜ ì „ë¬¸í™”ëœ AI ì—ì´ì „íŠ¸**ê°€ í˜‘ì—…í•˜ì—¬ ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ì£¼ì‹ ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±
- ğŸ“Š **ê¸‰ë“±ì£¼ ìë™ í¬ì°©**: ê±°ë˜ëŸ‰, ê°­ ìƒìŠ¹, ì‹œì´ ëŒ€ë¹„ ê±°ë˜ëŒ€ê¸ˆ ë“±ì„ ë¶„ì„í•˜ì—¬ ê´€ì‹¬ì¢…ëª© ì„ ë³„
- ğŸ“ˆ **ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜**: AI ë¦¬í¬íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ë§¤ìˆ˜/ë§¤ë„ ì˜ì‚¬ê²°ì • ë° í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬
- ğŸ’± **ìë™ë§¤ë§¤**: í•œêµ­íˆ¬ìì¦ê¶Œ(KIS) APIë¥¼ í†µí•œ ì‹¤ì œ ë§¤ë§¤ ì‹¤í–‰
- ğŸ“± **í…”ë ˆê·¸ë¨ í†µí•©**: ë¶„ì„ ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í…”ë ˆê·¸ë¨ ì±„ë„ì— ì „ì†¡
- ğŸŒ **ë‹¤êµ­ì–´ ì§€ì›**: í•œêµ­ì–´, ì˜ì–´, ì¼ë³¸ì–´, ì¤‘êµ­ì–´ ë“± ë‹¤êµ­ì–´ ë¦¬í¬íŠ¸ ìƒì„±

### 1.2 ê¸°ìˆ  ìŠ¤íƒ

```
ì–¸ì–´: Python 3.10+
AI í”„ë ˆì„ì›Œí¬: mcp-agent (Multi-Agent Orchestration)
LLM ëª¨ë¸:
  - OpenAI GPT-4.1 (ë¶„ì„ ì—ì´ì „íŠ¸)
  - OpenAI GPT-5.1 (ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜)
  - Anthropic Claude Sonnet 4.5 (í…”ë ˆê·¸ë¨ ë´‡)
ë°ì´í„° ì†ŒìŠ¤:
  - pykrx: í•œêµ­ ì£¼ì‹ì‹œì¥ ë°ì´í„°
  - MCP Servers: kospi_kosdaq, firecrawl, perplexity
í†µì‹ : python-telegram-bot (v20+)
ë§¤ë§¤ API: í•œêµ­íˆ¬ìì¦ê¶Œ API
ë°ì´í„°ë² ì´ìŠ¤: SQLite (aiosqlite)
PDF ìƒì„±: Playwright (Chromium ê¸°ë°˜)
ì°¨íŠ¸: matplotlib, seaborn, mplfinance
```

### 1.3 í”„ë¡œì íŠ¸ ê·œëª¨

- **ì•½ 56ê°œì˜ Python íŒŒì¼** | **8,400+ ì¤„ì˜ ì½”ë“œ**
- **13ê°œì˜ ì „ë¬¸í™”ëœ AI ì—ì´ì „íŠ¸**
- **ì™„ì „í•œ ë¹„ë™ê¸°(async/await) êµ¬ì¡°**
- **ë‹¤êµ­ì–´ ì§€ì›** (ko, en, ja, zh, es, fr, de)

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì´í•´

### 2.1 ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRISM-INSIGHT ì‹œìŠ¤í…œ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Trigger    â”‚â”€â”€â”€â–¶â”‚   Orchestrator  â”‚â”€â”€â–¶â”‚   Analysis  â”‚ â”‚
â”‚  â”‚    Batch     â”‚    â”‚     Pipeline    â”‚   â”‚    Engine   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                    â”‚                      â”‚        â”‚
â”‚         â–¼                    â–¼                      â–¼        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Watchlist  â”‚    â”‚  13 AI Agents   â”‚   â”‚   Reports   â”‚ â”‚
â”‚  â”‚  Detection   â”‚    â”‚   Collaborate   â”‚   â”‚  (MD/PDF)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                      â”‚        â”‚
â”‚                              â–¼                      â–¼        â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚    Trading      â”‚   â”‚  Telegram   â”‚ â”‚
â”‚                      â”‚   Simulation    â”‚   â”‚  Messages   â”‚ â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                      â”‚        â”‚
â”‚                              â–¼                      â–¼        â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚   KIS Trading   â”‚   â”‚  Multi-lang â”‚ â”‚
â”‚                      â”‚      API        â”‚   â”‚  Channels   â”‚ â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ì£¼ìš” ì‹¤í–‰ íë¦„

```
1. íŠ¸ë¦¬ê±° ì‹¤í–‰ (09:10 ì˜¤ì „ / 15:30 ì˜¤í›„)
   â†“
2. trigger_batch.py (ê¸‰ë“±ì£¼ í¬ì°©)
   â”œâ”€ ê±°ë˜ëŸ‰ ê¸‰ì¦ ê°ì§€
   â”œâ”€ ê°­ ìƒìŠ¹ ê°ì§€
   â””â”€ ì„¹í„° ì„±ê³¼ ë¶„ì„
   â†“
3. stock_analysis_orchestrator.py (ë©”ì¸ íŒŒì´í”„ë¼ì¸)
   â”œâ”€ 1. í”„ë¦¬ì¦˜ ì‹œê·¸ë„ ì–¼ëŸ¿ ì „ì†¡ (í…”ë ˆê·¸ë¨)
   â”œâ”€ 2. AI ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±
   â”‚   â”œâ”€ ìˆœì°¨ì  ì—ì´ì „íŠ¸ ì‹¤í–‰ (rate limit ê³ ë ¤)
   â”‚   â””â”€ 13ê°œ ì „ë¬¸í™” ì—ì´ì „íŠ¸ í˜‘ì—…
   â”œâ”€ 3. ë§ˆí¬ë‹¤ìš´ â†’ PDF ë³€í™˜
   â”‚   â””â”€ Playwright (Chromium ê¸°ë°˜)
   â”œâ”€ 4. í…”ë ˆê·¸ë¨ ìš”ì•½ ìƒì„±
   â”‚   â”œâ”€ ìš”ì•½ ìµœì í™” ì—ì´ì „íŠ¸
   â”‚   â””â”€ í’ˆì§ˆ í‰ê°€ ì—ì´ì „íŠ¸ (ë°˜ë³µ ê°œì„ )
   â”œâ”€ 5. í…”ë ˆê·¸ë¨ ì±„ë„ ì „ì†¡
   â”‚   â””â”€ ë‹¤êµ­ì–´ ë¸Œë¡œë“œìºìŠ¤íŒ… ì§€ì›
   â””â”€ 6. ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜ ë° ì‹¤í–‰
       â”œâ”€ ë§¤ìˆ˜/ë§¤ë„ ì˜ì‚¬ê²°ì • ì—ì´ì „íŠ¸
       â”œâ”€ í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ (ìµœëŒ€ 10ê°œ ìŠ¬ë¡¯)
       â””â”€ KIS API ì‹¤í–‰ (ë°ëª¨ ë˜ëŠ” ì‹¤ì „ ëª¨ë“œ)
```

### 2.3 13ê°œ AI ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ

#### ë¶„ì„ íŒ€ (6ê°œ ì—ì´ì „íŠ¸) - GPT-4.1 ê¸°ë°˜

1. **ê¸°ìˆ ì  ë¶„ì„ê°€** (`stock_price_agents.py`)
   - ì£¼ê°€ ë° ê±°ë˜ëŸ‰ ê¸°ìˆ ì  ë¶„ì„
   - ì´ë™í‰ê· ì„ , RSI, MACD, ë³¼ë¦°ì €ë°´ë“œ ë“±

2. **ê±°ë˜ë™í–¥ ë¶„ì„ê°€** (`stock_price_agents.py`)
   - ê¸°ê´€/ì™¸êµ­ì¸/ê°œì¸ íˆ¬ììë³„ ê±°ë˜ íŒ¨í„´ ë¶„ì„

3. **ì¬ë¬´ ë¶„ì„ê°€** (`company_info_agents.py`)
   - PER, PBR, ROE ë“± ë°¸ë¥˜ì—ì´ì…˜ ë¶„ì„
   - ëª©í‘œì£¼ê°€ ë° ì¦ê¶Œì‚¬ ì»¨ì„¼ì„œìŠ¤

4. **ì‚°ì—… ë¶„ì„ê°€** (`company_info_agents.py`)
   - ì‚¬ì—… êµ¬ì¡° ë° ê²½ìŸë ¥ ë¶„ì„
   - ì‹œì¥ ì ìœ ìœ¨, ê²½ìŸì‚¬ ë¹„êµ

5. **ì •ë³´ ë¶„ì„ê°€** (`news_strategy_agents.py`)
   - ë‰´ìŠ¤ ë° ê³µì‹œ ë¶„ì„
   - ì£¼ê°€ ë³€ë™ ì›ì¸ ê·œëª…

6. **ì‹œì¥ ë¶„ì„ê°€** (`market_index_agents.py`)
   - KOSPI/KOSDAQ ì§€ìˆ˜ ë¶„ì„
   - ê±°ì‹œê²½ì œ ì§€í‘œ ë¶„ì„
   - **ìºì‹±ë¨**: ë™ì¼ ë‚ ì§œ ë¶„ì„ ê²°ê³¼ ì¬ì‚¬ìš©

#### ì „ëµ íŒ€ (1ê°œ ì—ì´ì „íŠ¸) - GPT-4.1 ê¸°ë°˜

7. **íˆ¬ì ì „ëµê°€** (`news_strategy_agents.py`)
   - ëª¨ë“  ë¶„ì„ ê²°ê³¼ë¥¼ í†µí•©í•˜ì—¬ ìµœì¢… íˆ¬ì ì „ëµ ìˆ˜ë¦½
   - ë‹¨ê¸°/ì¤‘ê¸°/ì¥ê¸° íˆ¬ììë³„ ë§ì¶¤ ì „ëµ ì œì‹œ

#### ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ íŒ€ (3ê°œ ì—ì´ì „íŠ¸)

8-1. **ìš”ì•½ ì „ë¬¸ê°€** (`telegram_summary_optimizer_agent.py`)
   - ìƒì„¸ ë¦¬í¬íŠ¸ë¥¼ 400ì ë‚´ì™¸ í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ë¡œ ë³€í™˜

8-2. **í’ˆì§ˆ ê²€ìˆ˜ì** (`telegram_summary_evaluator_agent.py`)
   - ë©”ì‹œì§€ í’ˆì§ˆ í‰ê°€ ë° ê°œì„  ì œì•ˆ
   - EXCELLENT ë“±ê¸‰ê¹Œì§€ ë°˜ë³µ ê°œì„ 

8-3. **ë²ˆì—­ ì „ë¬¸ê°€** (`telegram_translator_agent.py`)
   - ë‹¤êµ­ì–´ ë²ˆì—­ (en, ja, zh, es, fr, de)

#### ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜ íŒ€ (2ê°œ ì—ì´ì „íŠ¸) - GPT-5.1 ê¸°ë°˜

9-1. **ë§¤ìˆ˜ ì „ë¬¸ê°€** (`trading_agents.py`)
   - ë°¸ë¥˜ì—ì´ì…˜ê³¼ ëª¨ë©˜í…€ ê¸°ë°˜ ë§¤ìˆ˜ ì ìˆ˜ í‰ê°€ (1~10ì )
   - í¬íŠ¸í´ë¦¬ì˜¤ ì œì•½ ì¡°ê±´ ê³ ë ¤ (ìµœëŒ€ 10ê°œ ìŠ¬ë¡¯)

9-2. **ë§¤ë„ ì „ë¬¸ê°€** (`trading_agents.py`)
   - ë³´ìœ  ì¢…ëª© ëª¨ë‹ˆí„°ë§ ë° ë§¤ë„ íƒ€ì´ë° ê²°ì •
   - ì†ì ˆ/ìµì ˆ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

#### ì‚¬ìš©ì ìƒë‹´ íŒ€ (2ê°œ ì—ì´ì „íŠ¸) - Claude Sonnet 4.5 ê¸°ë°˜

10-1. **í¬íŠ¸í´ë¦¬ì˜¤ ìƒë‹´ê°€** (`telegram_ai_bot.py`)
   - ì‚¬ìš©ì ë³´ìœ  ì¢…ëª© í‰ê°€ ë° ë§ì¶¤í˜• íˆ¬ì ì¡°ì–¸

10-2. **ëŒ€í™” ê´€ë¦¬ì** (`telegram_ai_bot.py`)
   - ëŒ€í™” ë§¥ë½ ìœ ì§€ ë° í›„ì† ì§ˆë¬¸ ì²˜ë¦¬

---

## 3. ê°œë°œ í™˜ê²½ ì„¤ì •

### 3.1 ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Python 3.10 ì´ìƒ
- Node.js (MCP ì„œë²„ìš©)
- Git
- (ì„ íƒ) Docker

### 3.2 ì´ˆê¸° ì„¤ì •

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/dragon1086/prism-insight.git
cd prism-insight

# 2. Python ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# 3. Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜ (PDF ë³€í™˜ìš©)
python3 -m playwright install chromium

# 4. ì„¤ì • íŒŒì¼ ë³µì‚¬
cp .env.example .env
cp mcp_agent.config.yaml.example mcp_agent.config.yaml
cp mcp_agent.secrets.yaml.example mcp_agent.secrets.yaml
cp ./examples/streamlit/config.py.example ./examples/streamlit/config.py
cp ./trading/config/kis_devlp.yaml.example ./trading/config/kis_devlp.yaml

# 5. Perplexity MCP ì„œë²„ ì„¤ì¹˜ (Node.js)
cd perplexity-ask && npm install && cd ..

# 6. í•œê¸€ í°íŠ¸ ì„¤ì¹˜ (Linuxë§Œ í•„ìš”)
# Rocky Linux/CentOS: sudo dnf install google-nanum-fonts
# Ubuntu: python3 cores/ubuntu_font_installer.py
sudo fc-cache -fv
python3 -c "import matplotlib.font_manager as fm; fm.fontManager.rebuild()"
```

### 3.3 í•„ìˆ˜ API í‚¤ ì„¤ì •

#### `.env` íŒŒì¼ ì„¤ì •

```bash
# í…”ë ˆê·¸ë¨ ë´‡ í† í°
TELEGRAM_BOT_TOKEN="123456789:ABCdefGHIjklMNOpqrsTUVwxyz"
TELEGRAM_AI_BOT_TOKEN="987654321:ZYXwvuTSRqponMLKjihgfEDcba"

# í…”ë ˆê·¸ë¨ ì±„ë„ ID
TELEGRAM_CHANNEL_ID="-1001234567890"        # í•œêµ­ì–´ (ë©”ì¸)
TELEGRAM_CHANNEL_ID_EN="-1001234567891"     # ì˜ì–´
TELEGRAM_CHANNEL_ID_JA="-1001234567892"     # ì¼ë³¸ì–´
TELEGRAM_CHANNEL_ID_ZH="-1001234567893"     # ì¤‘êµ­ì–´
```

#### `mcp_agent.secrets.yaml` íŒŒì¼ ì„¤ì •

```yaml
# OpenAI
OPENAI_API_KEY: "sk-..."

# Anthropic
ANTHROPIC_API_KEY: "sk-ant-..."

# Firecrawl
FIRECRAWL_API_KEY: "fc-..."

# Perplexity
PERPLEXITY_API_KEY: "pplx-..."

# WiseReport (í•œêµ­ ê¸ˆìœµ ë°ì´í„°)
WISEREPORT_KEY: "..."
```

#### `trading/config/kis_devlp.yaml` íŒŒì¼ ì„¤ì • (ìë™ë§¤ë§¤ ì‚¬ìš© ì‹œ)

```yaml
# í•œêµ­íˆ¬ìì¦ê¶Œ API ì„¤ì •
kis_app_key: "YOUR_APP_KEY"
kis_app_secret: "YOUR_APP_SECRET"
kis_account_number: "12345678-01"
kis_account_code: "01"

# ë§¤ë§¤ ì„¤ì •
default_unit_amount: 10000     # ì¢…ëª©ë‹¹ ë§¤ìˆ˜ ê¸ˆì•¡ (ì›)
auto_trading: true             # ìë™ë§¤ë§¤ í™œì„±í™”
default_mode: demo             # "demo" ë˜ëŠ” "real"
```

### 3.4 ê°œë°œ í™˜ê²½ ê²€ì¦

```bash
# 1. Python ë²„ì „ í™•ì¸
python3 --version  # 3.10 ì´ìƒì´ì–´ì•¼ í•¨

# 2. ì˜ì¡´ì„± ì„¤ì¹˜ í™•ì¸
python3 -c "import openai, anthropic, telegram; print('OK')"

# 3. Playwright ì„¤ì¹˜ í™•ì¸
python3 -m playwright --version

# 4. í…”ë ˆê·¸ë¨ ì„¤ì • í™•ì¸ (í…”ë ˆê·¸ë¨ ì‚¬ìš© ì‹œ)
python3 -c "from telegram_config import TelegramConfig; config = TelegramConfig(); config.validate_or_raise(); print('OK')"

# 5. ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python3 stock_analysis_orchestrator.py --mode morning --no-telegram
```

---

## 4. í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì´í•´

### 4.1 ì£¼ìš” íŒŒì¼ êµ¬ì¡°

```
prism-insight/
â”œâ”€â”€ ğŸ“‚ cores/                           # ğŸ¤– í•µì‹¬ AI ë¶„ì„ ì—”ì§„
â”‚   â”œâ”€â”€ ğŸ“‚ agents/                     # AI ì—ì´ì „íŠ¸ ì •ì˜
â”‚   â”‚   â”œâ”€â”€ company_info_agents.py     # ì¬ë¬´ ë° ì‚¬ì—… ë¶„ì„
â”‚   â”‚   â”œâ”€â”€ stock_price_agents.py      # ê¸°ìˆ ì  ë¶„ì„ ë° ê±°ë˜ë™í–¥
â”‚   â”‚   â”œâ”€â”€ news_strategy_agents.py    # ë‰´ìŠ¤ ë° íˆ¬ì ì „ëµ
â”‚   â”‚   â”œâ”€â”€ market_index_agents.py     # ì‹œì¥ ë° ê±°ì‹œê²½ì œ ë¶„ì„
â”‚   â”‚   â”œâ”€â”€ trading_agents.py          # ë§¤ë§¤ ì‹œë‚˜ë¦¬ì˜¤ ë° ë§¤ë„ ê²°ì •
â”‚   â”‚   â”œâ”€â”€ telegram_summary_optimizer_agent.py   # ìš”ì•½ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ telegram_summary_evaluator_agent.py   # í’ˆì§ˆ ê²€ìˆ˜
â”‚   â”‚   â””â”€â”€ telegram_translator_agent.py          # ë‹¤êµ­ì–´ ë²ˆì—­
â”‚   â”œâ”€â”€ analysis.py                    # í•µì‹¬ ë¶„ì„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
â”‚   â”œâ”€â”€ report_generation.py           # ë¦¬í¬íŠ¸ í…œí”Œë¦¿ ë° ìƒì„±
â”‚   â”œâ”€â”€ stock_chart.py                 # ì°¨íŠ¸ ìƒì„± (matplotlib)
â”‚   â”œâ”€â”€ language_config.py             # ë‹¤êµ­ì–´ í…œí”Œë¦¿
â”‚   â””â”€â”€ utils.py                       # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚
â”œâ”€â”€ ğŸ“‚ trading/                         # ğŸ’± ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ domestic_stock_trading.py      # KIS API ë˜í¼
â”‚   â”œâ”€â”€ kis_auth.py                    # ì¸ì¦ ë° í† í° ê´€ë¦¬
â”‚   â”œâ”€â”€ portfolio_telegram_reporter.py # í¬íŠ¸í´ë¦¬ì˜¤ ë¦¬í¬íŠ¸
â”‚   â””â”€â”€ ğŸ“‚ config/                     # ë§¤ë§¤ ì„¤ì •
â”‚
â”œâ”€â”€ stock_analysis_orchestrator.py     # ğŸ¯ ë©”ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”œâ”€â”€ stock_tracking_agent.py            # ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜ ì—ì´ì „íŠ¸
â”œâ”€â”€ stock_tracking_enhanced_agent.py   # í–¥ìƒëœ ë§¤ë§¤ ì—ì´ì „íŠ¸
â”œâ”€â”€ telegram_ai_bot.py                 # í…”ë ˆê·¸ë¨ ë´‡ (Claude ê¸°ë°˜)
â”œâ”€â”€ telegram_bot_agent.py              # ë´‡ ë©”ì‹œì§€ ì²˜ë¦¬
â”œâ”€â”€ telegram_summary_agent.py          # ìš”ì•½ ìƒì„± íŒŒì´í”„ë¼ì¸
â”œâ”€â”€ trigger_batch.py                   # ê¸‰ë“±ì£¼ í¬ì°©
â”œâ”€â”€ pdf_converter.py                   # ë§ˆí¬ë‹¤ìš´ â†’ PDF ë³€í™˜
â”œâ”€â”€ telegram_config.py                 # TelegramConfig í´ë˜ìŠ¤
â””â”€â”€ check_market_day.py                # ì¥ íœ´ì¥ì¼ ê²€ì¦
```

### 4.2 í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ìƒì„¸ ì„¤ëª…

#### 4.2.1 `stock_analysis_orchestrator.py` - ë©”ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°

**ì—­í• **: ì „ì²´ íŒŒì´í”„ë¼ì¸ì„ ì¡°ìœ¨í•˜ëŠ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸

**ì£¼ìš” ë©”ì„œë“œ:**
- `run_full_pipeline()`: ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
- `run_trigger_batch()`: ê¸‰ë“±ì£¼ í¬ì°© ì‹¤í–‰
- `generate_reports()`: AI ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±
- `convert_to_pdf()`: PDF ë³€í™˜
- `generate_telegram_messages()`: í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ìƒì„±
- `send_telegram_messages()`: í…”ë ˆê·¸ë¨ ì „ì†¡

**ì‹¤í–‰ ì˜ˆì‹œ:**
```bash
# ì˜¤ì „ ë¶„ì„ ì‹¤í–‰
python stock_analysis_orchestrator.py --mode morning

# í…”ë ˆê·¸ë¨ ì—†ì´ ë¡œì»¬ í…ŒìŠ¤íŠ¸
python stock_analysis_orchestrator.py --mode morning --no-telegram

# ì˜ì–´ ë¦¬í¬íŠ¸ ìƒì„±
python stock_analysis_orchestrator.py --mode morning --language en
```

#### 4.2.2 `cores/analysis.py` - í•µì‹¬ ë¶„ì„ ì—”ì§„

**ì—­í• **: 13ê°œ AI ì—ì´ì „íŠ¸ë¥¼ ì¡°ìœ¨í•˜ì—¬ ì¢…í•© ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±

**ì£¼ìš” íë¦„:**
```python
async def analyze_stock(company_code, company_name, reference_date, language="ko"):
    # 1. MCPApp ì´ˆê¸°í™”
    app = MCPApp(name="stock_analysis")
    
    async with app.run() as parallel_app:
        # 2. ì—ì´ì „íŠ¸ ë””ë ‰í† ë¦¬ ê°€ì ¸ì˜¤ê¸°
        agents = get_agent_directory(...)
        
        # 3. ìˆœì°¨ì ìœ¼ë¡œ ê° ì„¹ì…˜ ë¶„ì„ (rate limit ê³ ë ¤)
        section_reports = {}
        for section in base_sections:
            agent = agents[section]
            report = await generate_report(agent, section, ...)
            section_reports[section] = report
        
        # 4. íˆ¬ì ì „ëµ ìƒì„± (ëª¨ë“  ë¶„ì„ í†µí•©)
        strategy = await generate_investment_strategy(...)
        
        # 5. ìµœì¢… ë¦¬í¬íŠ¸ ìƒì„±
        final_report = compose_final_report(...)
        
        return final_report
```

**ì¤‘ìš” í¬ì¸íŠ¸:**
- **ìˆœì°¨ ì‹¤í–‰**: API rate limitì„ í”¼í•˜ê¸° ìœ„í•´ ë³‘ë ¬ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
- **ì‹œì¥ ë¶„ì„ ìºì‹±**: ë™ì¼ ë‚ ì§œì˜ ì‹œì¥ ë¶„ì„ ê²°ê³¼ëŠ” ìºì‹œì—ì„œ ì¬ì‚¬ìš©
- **ì—ëŸ¬ ì²˜ë¦¬**: ê° ì„¹ì…˜ ë¶„ì„ ì‹¤íŒ¨ ì‹œì—ë„ ë‹¤ìŒ ì„¹ì…˜ ê³„ì† ì§„í–‰

#### 4.2.3 `trigger_batch.py` - ê¸‰ë“±ì£¼ í¬ì°©

**ì—­í• **: ê±°ë˜ëŸ‰ ê¸‰ì¦, ê°­ ìƒìŠ¹ ë“±ì„ ê°ì§€í•˜ì—¬ ê´€ì‹¬ì¢…ëª© ì„ ë³„

**ì£¼ìš” ê°ì§€ ê¸°ì¤€:**
- ê±°ë˜ëŸ‰ ê¸‰ì¦: ì „ì¼ ëŒ€ë¹„ ê±°ë˜ëŸ‰ ì¦ê°€ìœ¨
- ê°­ ìƒìŠ¹: ì „ì¼ ì¢…ê°€ ëŒ€ë¹„ ì‹œê°€ ìƒìŠ¹ë¥ 
- ì‹œì´ ëŒ€ë¹„ ê±°ë˜ëŒ€ê¸ˆ: ê±°ë˜ëŒ€ê¸ˆ/ì‹œê°€ì´ì•¡ ë¹„ìœ¨
- ë§ˆê° ê°•ë„: ì¥ ë§ˆê° ì‹œì ì˜ ì£¼ê°€ ê°•ë„

**ì‹¤í–‰ ì˜ˆì‹œ:**
```bash
# ì˜¤ì „ ê¸‰ë“±ì£¼ í¬ì°©
python trigger_batch.py morning INFO --output trigger_results.json

# ì˜¤í›„ ê¸‰ë“±ì£¼ í¬ì°©
python trigger_batch.py afternoon INFO --output trigger_results.json
```

#### 4.2.4 `stock_tracking_agent.py` - ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜

**ì—­í• **: AI ë¦¬í¬íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ë§¤ìˆ˜/ë§¤ë„ ì˜ì‚¬ê²°ì • ë° í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬

**ì£¼ìš” ê¸°ëŠ¥:**
- ë§¤ìˆ˜ ì ìˆ˜ í‰ê°€ (1~10ì , 6ì  ì´ìƒ ì‹œ ë§¤ìˆ˜ ê³ ë ¤)
- í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ (ìµœëŒ€ 10ê°œ ìŠ¬ë¡¯)
- ì‚°ì—…êµ° ë¶„ì‚°íˆ¬ì (ê°™ì€ ì„¹í„° ìµœëŒ€ 3ê°œ)
- ì†ì ˆ/ìµì ˆ ì‹œë‚˜ë¦¬ì˜¤ ëª¨ë‹ˆí„°ë§

**í¬íŠ¸í´ë¦¬ì˜¤ ì œì•½ ì¡°ê±´:**
```python
MAX_SLOTS = 10              # ìµœëŒ€ ë³´ìœ  ì¢…ëª© ìˆ˜
MAX_SAME_SECTOR = 3         # ê°™ì€ ì„¹í„° ìµœëŒ€ ë³´ìœ  ìˆ˜
SECTOR_CONCENTRATION = 0.3  # í•œ ì„¹í„° ìµœëŒ€ 30%
```

#### 4.2.5 `trading/domestic_stock_trading.py` - KIS API ë˜í¼

**ì—­í• **: í•œêµ­íˆ¬ìì¦ê¶Œ APIë¥¼ í†µí•œ ì‹¤ì œ ë§¤ë§¤ ì‹¤í–‰

**ì£¼ìš” ê¸°ëŠ¥:**
- ì¸ì¦ ë° í† í° ê´€ë¦¬
- ë§¤ìˆ˜/ë§¤ë„ ì£¼ë¬¸ ì‹¤í–‰
- í¬íŠ¸í´ë¦¬ì˜¤ ì¡°íšŒ
- ì‹¤ì‹œê°„ ì‹œì„¸ ì¡°íšŒ

**ì‚¬ìš© ì˜ˆì‹œ:**
```python
from trading.domestic_stock_trading import AsyncTradingContext

async with AsyncTradingContext(mode="demo", buy_amount=10000) as trader:
    # ë§¤ìˆ˜
    result = await trader.async_buy_stock("005930", quantity=1)
    
    # ë§¤ë„
    result = await trader.async_sell_stock("005930", quantity=1)
    
    # í¬íŠ¸í´ë¦¬ì˜¤ ì¡°íšŒ
    portfolio = await trader.async_get_portfolio()
```

---

## 5. ê°œë°œ ì›Œí¬í”Œë¡œìš°

### 5.1 ì¼ë°˜ì ì¸ ê°œë°œ íë¦„

```
1. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ íŒŒì•…
   â†“
2. ê´€ë ¨ ì½”ë“œ íƒìƒ‰ ë° ì´í•´
   â†“
3. ë¡œì»¬ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸
   â†“
4. ì½”ë“œ ìˆ˜ì • ë° ê°œì„ 
   â†“
5. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
   â†“
6. ì»¤ë°‹ ë° PR ìƒì„±
```

### 5.2 ì½”ë“œ íƒìƒ‰ ê°€ì´ë“œ

**ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•  ë•Œ:**

1. **ì–´ë””ì„œ ì‹œì‘í• ê¹Œ?**
   - ì „ì²´ íŒŒì´í”„ë¼ì¸: `stock_analysis_orchestrator.py`
   - ë¶„ì„ ë¡œì§: `cores/analysis.py`
   - ì—ì´ì „íŠ¸ ì •ì˜: `cores/agents/*.py`
   - ë¦¬í¬íŠ¸ ìƒì„±: `cores/report_generation.py`
   - ë§¤ë§¤ ë¡œì§: `stock_tracking_agent.py`, `trading/domestic_stock_trading.py`

2. **ì—ì´ì „íŠ¸ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´?**
   - ì—ì´ì „íŠ¸ íŒŒì¼: `cores/agents/` ë””ë ‰í† ë¦¬
   - í”„ë¡¬í”„íŠ¸ ìˆ˜ì •: ê° ì—ì´ì „íŠ¸ì˜ `instruction` íŒŒë¼ë¯¸í„°
   - MCP ì„œë²„ ì¶”ê°€: `mcp_servers` íŒŒë¼ë¯¸í„°ì— ì¶”ê°€

3. **ì„¤ì •ì„ ë³€ê²½í•˜ë ¤ë©´?**
   - í…”ë ˆê·¸ë¨: `telegram_config.py`, `.env`
   - MCP: `mcp_agent.config.yaml`, `mcp_agent.secrets.yaml`
   - ë§¤ë§¤: `trading/config/kis_devlp.yaml`

### 5.3 í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python -m pytest tests/

# íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‹¤í–‰
python -m pytest tests/test_async_trading.py

# ë¹ ë¥¸ í†µí•© í…ŒìŠ¤íŠ¸
python tests/quick_test.py

# JSON íŒŒì‹± í…ŒìŠ¤íŠ¸
python tests/quick_json_test.py
```

### 5.4 Git ì›Œí¬í”Œë¡œìš°

```bash
# 1. ë¸Œëœì¹˜ ìƒì„±
git checkout -b feature/your-feature-name

# 2. ë³€ê²½ì‚¬í•­ ì»¤ë°‹
git add .
git commit -m "feat: ê¸°ëŠ¥ ì„¤ëª…"

# 3. ì›ê²© ì €ì¥ì†Œì— í‘¸ì‹œ
git push -u origin feature/your-feature-name

# 4. Pull Request ìƒì„±
gh pr create --title "PR ì œëª©" --body "ì„¤ëª…"
```

**ì»¤ë°‹ ë©”ì‹œì§€ ì»¨ë²¤ì…˜:**
```
feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
fix: ë²„ê·¸ ìˆ˜ì •
docs: ë¬¸ì„œ ìˆ˜ì •
refactor: ì½”ë“œ ë¦¬íŒ©í† ë§
test: í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
chore: ê¸°íƒ€ ì‘ì—…
perf: ì„±ëŠ¥ ê°œì„ 
```

---

## 6. ì‹¤ìŠµ ê°€ì´ë“œ

### 6.1 ì‹¤ìŠµ 1: ë¡œì»¬ì—ì„œ ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±í•˜ê¸°

**ëª©í‘œ**: í…”ë ˆê·¸ë¨ ì—†ì´ ë¡œì»¬ì—ì„œ ë¶„ì„ ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•´ë³´ê¸°

```bash
# 1. íŠ¹ì • ì¢…ëª© ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±
cd cores
python main.py

# ë˜ëŠ” ì§ì ‘ í•¨ìˆ˜ í˜¸ì¶œ
python -c "
import asyncio
from cores.analysis import analyze_stock

async def test():
    report = await analyze_stock(
        company_code='005930',
        company_name='ì‚¼ì„±ì „ì',
        reference_date='20251205',
        language='ko'
    )
    print(report[:500])  # ì²˜ìŒ 500ìë§Œ ì¶œë ¥

asyncio.run(test())
"
```

**ì˜ˆìƒ ê²°ê³¼:**
- `reports/` ë””ë ‰í† ë¦¬ì— ë§ˆí¬ë‹¤ìš´ ë¦¬í¬íŠ¸ ìƒì„±
- ë¦¬í¬íŠ¸ì—ëŠ” ê¸°ìˆ ì  ë¶„ì„, ì¬ë¬´ ë¶„ì„, ë‰´ìŠ¤ ë¶„ì„ ë“±ì´ í¬í•¨ë¨

### 6.2 ì‹¤ìŠµ 2: ê¸‰ë“±ì£¼ í¬ì°© ê¸°ëŠ¥ ì´í•´í•˜ê¸°

**ëª©í‘œ**: `trigger_batch.py`ê°€ ì–´ë–»ê²Œ ê¸‰ë“±ì£¼ë¥¼ í¬ì°©í•˜ëŠ”ì§€ ì´í•´í•˜ê¸°

```bash
# 1. ê¸‰ë“±ì£¼ í¬ì°© ì‹¤í–‰
python trigger_batch.py morning INFO --output trigger_results.json

# 2. ê²°ê³¼ í™•ì¸
cat trigger_results.json | python -m json.tool
```

**í™•ì¸ ì‚¬í•­:**
- ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ ì¢…ëª©ì´ ì„ ë³„ë˜ì—ˆëŠ”ì§€
- ê±°ë˜ëŸ‰ ì¦ê°€ìœ¨, ê°­ ìƒìŠ¹ë¥  ë“± ìˆ˜ì¹˜ í™•ì¸
- `trigger_batch.py`ì˜ í•„í„°ë§ ë¡œì§ ì´í•´

### 6.3 ì‹¤ìŠµ 3: ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸ ìˆ˜ì •í•˜ê¸°

**ëª©í‘œ**: ê¸°ìˆ ì  ë¶„ì„ê°€ì˜ í”„ë¡¬í”„íŠ¸ë¥¼ ìˆ˜ì •í•˜ì—¬ ë¶„ì„ ìŠ¤íƒ€ì¼ ë³€ê²½í•˜ê¸°

```python
# íŒŒì¼: cores/agents/stock_price_agents.py

def create_price_volume_analysis_agent(...):
    if language == "en":
        instruction = """
        You are a technical analyst. 
        
        # ì—¬ê¸°ì— ì›í•˜ëŠ” ë¶„ì„ ìŠ¤íƒ€ì¼ ì¶”ê°€
        Focus on:
        1. Short-term momentum (5-day, 10-day)
        2. Volume patterns
        3. Support and resistance levels
        
        Be concise and data-driven.
        """
    else:
        instruction = """
        ë‹¹ì‹ ì€ ê¸°ìˆ ì  ë¶„ì„ê°€ì…ë‹ˆë‹¤.
        
        # ì—¬ê¸°ì— ì›í•˜ëŠ” ë¶„ì„ ìŠ¤íƒ€ì¼ ì¶”ê°€
        ë‹¤ìŒì— ì§‘ì¤‘í•˜ì„¸ìš”:
        1. ë‹¨ê¸° ëª¨ë©˜í…€ (5ì¼, 10ì¼)
        2. ê±°ë˜ëŸ‰ íŒ¨í„´
        3. ì§€ì§€ì„ ê³¼ ì €í•­ì„ 
        
        ê°„ê²°í•˜ê³  ë°ì´í„° ì¤‘ì‹¬ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”.
        """
    
    return Agent(instruction=instruction, ...)
```

**í…ŒìŠ¤íŠ¸:**
```bash
# ìˆ˜ì • í›„ ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±í•˜ì—¬ ë³€ê²½ì‚¬í•­ í™•ì¸
python cores/main.py
```

### 6.4 ì‹¤ìŠµ 4: ìƒˆë¡œìš´ ì„¹ì…˜ ì¶”ê°€í•˜ê¸°

**ëª©í‘œ**: ë¶„ì„ ë¦¬í¬íŠ¸ì— ìƒˆë¡œìš´ ì„¹ì…˜ ì¶”ê°€í•˜ê¸°

**ë‹¨ê³„:**

1. **ì—ì´ì „íŠ¸ ìƒì„±** (`cores/agents/your_agent.py`)
```python
from mcp_agent import Agent

def create_your_agent(company_name, company_code, reference_date, language="ko"):
    if language == "en":
        instruction = "You are a specialized analyst for [YOUR DOMAIN]..."
    else:
        instruction = "ë‹¹ì‹ ì€ [ë„ë©”ì¸] ì „ë¬¸ ë¶„ì„ê°€ì…ë‹ˆë‹¤..."
    
    return Agent(
        instruction=instruction,
        description=f"Your Agent for {company_name}",
        mcp_servers=["kospi_kosdaq"],  # í•„ìš”í•œ MCP ì„œë²„ ì¶”ê°€
    )
```

2. **ì—ì´ì „íŠ¸ ë“±ë¡** (`cores/agents/__init__.py`)
```python
from .your_agent import create_your_agent

def get_agent_directory(...):
    agents = {
        # ... ê¸°ì¡´ ì—ì´ì „íŠ¸ë“¤
        "your_section": lambda: create_your_agent(...),
    }
    return agents
```

3. **ì„¹ì…˜ ì¶”ê°€** (`cores/analysis.py`)
```python
base_sections = [
    "price_volume_analysis",
    # ... ê¸°ì¡´ ì„¹ì…˜ë“¤
    "your_section",  # ìƒˆ ì„¹ì…˜ ì¶”ê°€
]
```

4. **í…œí”Œë¦¿ ì¶”ê°€** (`cores/report_generation.py`)
```python
section_templates = {
    # ... ê¸°ì¡´ í…œí”Œë¦¿ë“¤
    "your_section": """
## Your Section Title

{content}
""",
}
```

### 6.5 ì‹¤ìŠµ 5: ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜ ì´í•´í•˜ê¸°

**ëª©í‘œ**: ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜ì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì´í•´í•˜ê¸°

```bash
# 1. ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ (ë°ëª¨ ëª¨ë“œ)
python stock_tracking_agent.py

# ë˜ëŠ” í–¥ìƒëœ ë²„ì „
python stock_tracking_enhanced_agent.py
```

**í™•ì¸ ì‚¬í•­:**
- ë§¤ìˆ˜ ì ìˆ˜ í‰ê°€ ë¡œì§
- í¬íŠ¸í´ë¦¬ì˜¤ ì œì•½ ì¡°ê±´ ì ìš©
- ì†ì ˆ/ìµì ˆ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±

---

## 7. ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### 7.1 ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤

#### ë¬¸ì œ 1: Playwright PDF ìƒì„± ì‹¤íŒ¨

**ì¦ìƒ:**
```
Error: Browser executable not found
```

**í•´ê²°:**
```bash
# Chromium ë¸Œë¼ìš°ì € ì„¤ì¹˜
python3 -m playwright install chromium

# Ubuntu: ì˜ì¡´ì„± í¬í•¨ ì„¤ì¹˜
python3 -m playwright install --with-deps chromium

# ë˜ëŠ” ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
cd utils && chmod +x setup_playwright.sh && ./setup_playwright.sh
```

#### ë¬¸ì œ 2: í•œê¸€ í°íŠ¸ê°€ ì°¨íŠ¸ì— í‘œì‹œë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**: ì°¨íŠ¸ì—ì„œ í•œê¸€ì´ ì‚¬ê°í˜•ìœ¼ë¡œ í‘œì‹œë¨

**í•´ê²°:**
```bash
# Rocky Linux/CentOS
sudo dnf install google-nanum-fonts

# Ubuntu/Debian
python3 cores/ubuntu_font_installer.py

# í°íŠ¸ ìºì‹œ ì¬êµ¬ì„±
sudo fc-cache -fv
python3 -c "import matplotlib.font_manager as fm; fm.fontManager.rebuild()"
```

#### ë¬¸ì œ 3: í…”ë ˆê·¸ë¨ ë´‡ì´ ì‘ë‹µí•˜ì§€ ì•ŠìŒ

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
1. `.env` íŒŒì¼ í™•ì¸
```bash
cat .env | grep TELEGRAM
```

2. ë´‡ í† í° ìœ íš¨ì„± í™•ì¸
3. ë´‡ì´ ì±„ë„ì— ì ‘ê·¼ ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸
4. ë¡œê·¸ í™•ì¸
```bash
tail -f log_*.log
```

5. ì„¤ì • ê²€ì¦
```python
from telegram_config import TelegramConfig
config = TelegramConfig()
config.validate_or_raise()
config.log_status()
```

#### ë¬¸ì œ 4: MCP ì„œë²„ ì—°ê²° ì‹¤íŒ¨

**ì¦ìƒ:**
```
Error: MCP server 'kospi_kosdaq' not responding
```

**í•´ê²°:**
```bash
# 1. MCP ì„œë²„ ì„¤ì¹˜ í™•ì¸
python3 -m kospi_kosdaq_stock_server

# 2. mcp_agent.config.yaml í™•ì¸
cat mcp_agent.config.yaml | grep kospi_kosdaq

# 3. API í‚¤ í™•ì¸
cat mcp_agent.secrets.yaml | grep WISEREPORT

# 4. Perplexity ì„œë²„ í…ŒìŠ¤íŠ¸
cd perplexity-ask && npm install && node dist/index.js
```

#### ë¬¸ì œ 5: API Rate Limit ì˜¤ë¥˜

**ì¦ìƒ:**
```
Error: Rate limit exceeded
```

**í•´ê²°:**
- **ìˆœì°¨ ì‹¤í–‰ ìœ ì§€**: ë³‘ë ¬ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜
- **ì¬ì‹œë„ ë¡œì§**: `tenacity` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
- **ì‹œì¥ ë¶„ì„ ìºì‹±**: ë™ì¼ ë‚ ì§œ ë¶„ì„ ê²°ê³¼ ì¬ì‚¬ìš©

**ì½”ë“œ ì˜ˆì‹œ:**
```python
from tenacity import retry, stop_after_attempt, wait_exponential

@retry(
    stop=stop_after_attempt(2),
    wait=wait_exponential(multiplier=1, min=10, max=30),
)
async def generate_report(...):
    # êµ¬í˜„
    pass
```

### 7.2 ë””ë²„ê¹… íŒ

#### ë¡œê·¸ ë ˆë²¨ ë³€ê²½

```python
import logging

# DEBUG ë ˆë²¨ë¡œ ë³€ê²½
logging.basicConfig(
    level=logging.DEBUG,  # INFOì—ì„œ DEBUGë¡œ ë³€ê²½
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.StreamHandler(),
        logging.FileHandler(f"debug_{datetime.now().strftime('%Y%m%d_%H%M%S')}.log")
    ]
)
```

#### íŠ¹ì • ì¢…ëª©ë§Œ í…ŒìŠ¤íŠ¸

```python
# cores/main.py ìˆ˜ì •
result = asyncio.run(analyze_stock(
    company_code="005930",  # í…ŒìŠ¤íŠ¸í•  ì¢…ëª© ì½”ë“œ
    company_name="ì‚¼ì„±ì „ì",
    reference_date="20251205"
))
```

#### í…”ë ˆê·¸ë¨ ì—†ì´ í…ŒìŠ¤íŠ¸

```bash
# --no-telegram ì˜µì…˜ ì‚¬ìš©
python stock_analysis_orchestrator.py --mode morning --no-telegram
```

---

## 8. ë‹¤ìŒ ë‹¨ê³„

### 8.1 í•™ìŠµ ê²½ë¡œ

1. **ê¸°ë³¸ ì´í•´ (1ì£¼ì°¨)**
   - [ ] í”„ë¡œì íŠ¸ êµ¬ì¡° íŒŒì•…
   - [ ] ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ì´í•´
   - [ ] ë¡œì»¬ í™˜ê²½ì—ì„œ ì‹¤í–‰í•´ë³´ê¸°

2. **ì‹¬í™” í•™ìŠµ (2-3ì£¼ì°¨)**
   - [ ] AI ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ ì´í•´
   - [ ] ë¦¬í¬íŠ¸ ìƒì„± í”„ë¡œì„¸ìŠ¤ ì´í•´
   - [ ] ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜ ë¡œì§ ì´í•´

3. **ì‹¤ì „ ê°œë°œ (4ì£¼ì°¨ ì´í›„)**
   - [ ] ì‘ì€ ê¸°ëŠ¥ ê°œì„ ë¶€í„° ì‹œì‘
   - [ ] ë²„ê·¸ ìˆ˜ì •
   - [ ] ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€

### 8.2 ì¶”ì²œ í•™ìŠµ ìë£Œ

1. **í”„ë¡œì íŠ¸ ë¬¸ì„œ**
   - `README.md` / `README_ko.md`: í”„ë¡œì íŠ¸ ê°œìš”
   - `CLAUDE.md`: AI ì–´ì‹œìŠ¤í„´íŠ¸ìš© ìƒì„¸ ê°€ì´ë“œ
   - `CONTRIBUTING.md`: ê¸°ì—¬ ê°€ì´ë“œ

2. **ì½”ë“œ íƒìƒ‰**
   - `cores/analysis.py`: í•µì‹¬ ë¶„ì„ ë¡œì§
   - `cores/agents/*.py`: ê° ì—ì´ì „íŠ¸ êµ¬í˜„
   - `stock_analysis_orchestrator.py`: ì „ì²´ íŒŒì´í”„ë¼ì¸

3. **ì™¸ë¶€ ìë£Œ**
   - [mcp-agent ë¬¸ì„œ](https://github.com/modelcontextprotocol/python-sdk)
   - [python-telegram-bot ë¬¸ì„œ](https://python-telegram-bot.org/)
   - [pykrx ë¬¸ì„œ](https://github.com/sharebook-kr/pykrx)

### 8.3 ê¸°ì—¬ ë°©ë²•

1. **ì‘ì€ ê²ƒë¶€í„° ì‹œì‘**
   - ë¬¸ì„œ ê°œì„ 
   - ì½”ë“œ ì£¼ì„ ì¶”ê°€
   - ë²„ê·¸ ìˆ˜ì •

2. **ê¸°ëŠ¥ ì¶”ê°€ ì „ì—**
   - Issueì—ì„œ ë…¼ì˜
   - ì‘ì€ PRë¡œ ì‹œì‘
   - í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

3. **ì½”ë“œ ë¦¬ë·°**
   - PR ìƒì„± ì‹œ ìƒì„¸í•œ ì„¤ëª…
   - ë³€ê²½ ì´ìœ  ëª…ì‹œ
   - í…ŒìŠ¤íŠ¸ ê²°ê³¼ í¬í•¨

### 8.4 ì§ˆë¬¸í•˜ê¸°

**ì§ˆë¬¸í•  ë•Œ í¬í•¨í•  ì •ë³´:**
- ì–´ë–¤ ì‘ì—…ì„ í•˜ë ¤ê³  í–ˆëŠ”ì§€
- ì–´ë–¤ ì—ëŸ¬ê°€ ë°œìƒí–ˆëŠ”ì§€ (ì—ëŸ¬ ë©”ì‹œì§€ í¬í•¨)
- ì–´ë–¤ í™˜ê²½ì—ì„œ ì‹¤í–‰í–ˆëŠ”ì§€ (OS, Python ë²„ì „ ë“±)
- ë¡œê·¸ íŒŒì¼ (ê°€ëŠ¥í•œ ê²½ìš°)

**ì§ˆë¬¸ ì±„ë„:**
- GitHub Issues: ë²„ê·¸ ë¦¬í¬íŠ¸ ë° ê¸°ëŠ¥ ìš”ì²­
- GitHub Discussions: ì¼ë°˜ì ì¸ ì§ˆë¬¸
- í…”ë ˆê·¸ë¨: @stock_ai_agent

---

## ë¶€ë¡: ë¹ ë¥¸ ì°¸ì¡°

### ì£¼ìš” ëª…ë ¹ì–´

```bash
# ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
python stock_analysis_orchestrator.py --mode morning

# í…”ë ˆê·¸ë¨ ì—†ì´ í…ŒìŠ¤íŠ¸
python stock_analysis_orchestrator.py --mode morning --no-telegram

# ê¸‰ë“±ì£¼ í¬ì°©ë§Œ ì‹¤í–‰
python trigger_batch.py morning INFO --output trigger_results.json

# íŠ¹ì • ì¢…ëª© ë¶„ì„
cd cores && python main.py

# ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜
python stock_tracking_agent.py

# í…”ë ˆê·¸ë¨ ë´‡ ì‹¤í–‰
python telegram_ai_bot.py
```

### ì£¼ìš” ë””ë ‰í† ë¦¬

| ë””ë ‰í† ë¦¬ | ìš©ë„ |
|---------|------|
| `cores/` | í•µì‹¬ ë¶„ì„ ì—”ì§„ ë° ì—ì´ì „íŠ¸ |
| `trading/` | ë§¤ë§¤ ì‹œìŠ¤í…œ ë° KIS API |
| `examples/` | ì›¹ ì¸í„°í˜ì´ìŠ¤ (Streamlit, Next.js) |
| `tests/` | í…ŒìŠ¤íŠ¸ ì½”ë“œ |
| `utils/` | ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸ |
| `docs/` | ë¬¸ì„œ ë° ì´ë¯¸ì§€ |

### í™˜ê²½ ë³€ìˆ˜

| ë³€ìˆ˜ | ìš©ë„ | í•„ìˆ˜ ì—¬ë¶€ |
|------|------|----------|
| `TELEGRAM_BOT_TOKEN` | í…”ë ˆê·¸ë¨ ë´‡ í† í° | í…”ë ˆê·¸ë¨ ì‚¬ìš© ì‹œ |
| `TELEGRAM_CHANNEL_ID` | í…”ë ˆê·¸ë¨ ì±„ë„ ID | í…”ë ˆê·¸ë¨ ì‚¬ìš© ì‹œ |
| `OPENAI_API_KEY` | OpenAI API í‚¤ | í•„ìˆ˜ |
| `ANTHROPIC_API_KEY` | Anthropic API í‚¤ | í…”ë ˆê·¸ë¨ ë´‡ ì‚¬ìš© ì‹œ |

---

**ë¬¸ì„œ ë²„ì „**: 1.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-05  
**ì‘ì„±ì**: PRISM-INSIGHT ê°œë°œíŒ€

ì§ˆë¬¸ì´ë‚˜ ê°œì„  ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ GitHub Issueë¥¼ í†µí•´ ì•Œë ¤ì£¼ì„¸ìš”!

